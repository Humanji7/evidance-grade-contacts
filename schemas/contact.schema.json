{
  "$defs": {
    "ContactType": {
      "description": "Types of contact information we extract.",
      "enum": [
        "email",
        "phone",
        "link"
      ],
      "title": "ContactType",
      "type": "string"
    },
    "Evidence": {
      "description": "Mini Evidence Package - 7 required fields for each verified record.\n\nRecords missing any required field are marked UNVERIFIED and excluded \nfrom exports per PoC specification.",
      "properties": {
        "source_url": {
          "description": "Source page URL where data was extracted",
          "title": "Source Url",
          "type": "string"
        },
        "selector_or_xpath": {
          "description": "CSS selector or XPath used for extraction",
          "title": "Selector Or Xpath",
          "type": "string"
        },
        "verbatim_quote": {
          "description": "Verbatim innerText content from the DOM node",
          "title": "Verbatim Quote",
          "type": "string"
        },
        "dom_node_screenshot": {
          "description": "Path/reference to DOM node screenshot",
          "title": "Dom Node Screenshot",
          "type": "string"
        },
        "timestamp": {
          "description": "ISO 8601 extraction timestamp",
          "format": "date-time",
          "title": "Timestamp",
          "type": "string"
        },
        "parser_version": {
          "description": "Tool version for reproducibility (e.g., '0.1.0-poc')",
          "title": "Parser Version",
          "type": "string"
        },
        "content_hash": {
          "description": "SHA-256 hash of normalized node text",
          "title": "Content Hash",
          "type": "string"
        }
      },
      "required": [
        "source_url",
        "selector_or_xpath",
        "verbatim_quote",
        "dom_node_screenshot",
        "timestamp",
        "parser_version",
        "content_hash"
      ],
      "title": "Evidence",
      "type": "object"
    },
    "VerificationStatus": {
      "description": "Status of record verification based on Evidence Completeness Rate.",
      "enum": [
        "VERIFIED",
        "UNVERIFIED"
      ],
      "title": "VerificationStatus",
      "type": "string"
    }
  },
  "description": "Main contact record with nested Evidence package.\n\nBased on JSON example from README.md with full traceability support.",
  "properties": {
    "company": {
      "description": "Company name extracted from source",
      "title": "Company",
      "type": "string"
    },
    "person_name": {
      "description": "Person's full name",
      "title": "Person Name",
      "type": "string"
    },
    "role_title": {
      "description": "Person's role or job title",
      "title": "Role Title",
      "type": "string"
    },
    "contact_type": {
      "$ref": "#/$defs/ContactType",
      "description": "Type of contact information"
    },
    "contact_value": {
      "description": "The actual contact value (email/phone/link)",
      "title": "Contact Value",
      "type": "string"
    },
    "evidence": {
      "$ref": "#/$defs/Evidence",
      "description": "Complete Mini Evidence Package for this contact"
    },
    "captured_at": {
      "description": "Timestamp when this contact record was created",
      "format": "date-time",
      "title": "Captured At",
      "type": "string"
    },
    "verification_status": {
      "$ref": "#/$defs/VerificationStatus",
      "default": "UNVERIFIED",
      "description": "Verification status based on Evidence Completeness Rate"
    }
  },
  "required": [
    "company",
    "person_name",
    "role_title",
    "contact_type",
    "contact_value",
    "evidence",
    "captured_at"
  ],
  "title": "Contact",
  "type": "object",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "examples": [
    {
      "company": "Example Inc.",
      "person_name": "Jane Doe",
      "role_title": "Head of Marketing",
      "contact_type": "email",
      "contact_value": "jane.doe@example.com",
      "evidence": {
        "source_url": "https://example.com/company/leadership",
        "selector_or_xpath": "div.card:has(h3:contains('Jane Doe'))",
        "verbatim_quote": "Jane Doe â€” Head of Marketing",
        "dom_node_screenshot": "evidence/example_jane_doe.png",
        "timestamp": "2025-09-04T10:15:00Z",
        "parser_version": "0.1.0-poc",
        "content_hash": "a1b2c3d4e5f67890123456789012345678901234567890123456789012345678"
      },
      "captured_at": "2025-09-04T10:15:05Z",
      "verification_status": "VERIFIED"
    }
  ]
}
